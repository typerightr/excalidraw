var M=1e-4,gt=(t,n,o)=>Math.min(Math.max(t,n),o),ht=(t,n,o="round")=>{let e=Math.pow(10,n);return Math[o]((t+Number.EPSILON)*e)/e},Lt=(t,n,o="round")=>{let e=1/n;return Math[o](t*e)/e},yt=(t,n)=>(t+n)/2,Gt=t=>typeof t=="number"&&Number.isFinite(t),Mt=(t,n,o=1e-4)=>Math.abs(t-n)<o;var V=t=>t<0?t%(2*Math.PI)+2*Math.PI:t%(2*Math.PI),vt=([t,n])=>[Math.hypot(t,n),V(Math.atan2(n,t))];function et(t){return t*Math.PI/180}function Ct(t){return t*180/Math.PI}function Vt(t){return Math.abs(Math.sin(2*t))<1e-4}function _t(t,n,o){return t=V(t),n=V(n),o=V(o),n<o?t>=n&&t<=o:t>=n||t<=o}function Nt(t,n){t=V(t),n=V(n);let o=t-n;return o<-Math.PI?o=o+2*Math.PI:o>Math.PI&&(o=o-2*Math.PI),Math.abs(o)}function y(t,n,o=0,e=0){return[t-o,n-e]}function L(t,n=[0,0],o,e=[0,1]){let i=y(t[0]-n[0],t[1]-n[1]);return o&&it(i)<o*o?e:i}function z(t,n){return t[0]*n[1]-n[0]*t[1]}function O(t,n){return t[0]*n[0]+t[1]*n[1]}function Et(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&!isNaN(t[0])&&typeof t[1]=="number"&&!isNaN(t[1])}function X(t,n){return[t[0]+n[0],t[1]+n[1]]}function Y(t,n){return[t[0]-n[0],t[1]-n[1]]}function R(t,n){return y(t[0]*n,t[1]*n)}function it(t){return t[0]*t[0]+t[1]*t[1]}function Pt(t){return Math.sqrt(it(t))}var W=t=>{let n=Pt(t);return n===0?y(0,0):y(t[0]/n,t[1]/n)},H=t=>y(t[1],-t[0]);function p(t,n){return[t,n]}function Ot(t){return t.length===2?p(t[0],t[1]):void 0}function Xt(t){return t}function C(t,n=p(0,0)){return p(n[0]+t[0],n[1]+t[1])}function S(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&!isNaN(t[0])&&typeof t[1]=="number"&&!isNaN(t[1])}function k(t,n,o=1e-4){let e=Math.abs;return e(t[0]-n[0])<o&&e(t[1]-n[1])<o}function B([t,n],[o,e],i){return p((t-o)*Math.cos(i)-(n-e)*Math.sin(i)+o,(t-o)*Math.sin(i)+(n-e)*Math.cos(i)+e)}function Yt(t,n,o){return B(t,n,et(o))}function ut(t,n=[0,0]){return p(t[0]+n[0],t[1]+n[1])}function Q(t,n){return p((t[0]+n[0])/2,(t[1]+n[1])/2)}function _(t,n){return Math.hypot(n[0]-t[0],n[1]-t[1])}function kt(t,n){let o=n[0]-t[0],e=n[1]-t[1];return o*o+e*e}var Bt=(t,n,o)=>ut(n,R(L(t,n),o)),jt=(t,n,o)=>n[0]<=Math.max(t[0],o[0])&&n[0]>=Math.min(t[0],o[0])&&n[1]<=Math.max(t[1],o[1])&&n[1]>=Math.min(t[1],o[1]);var J=[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Z=[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872];function rt(t,n,o,e){return[t,n,o,e]}function mt(t,n,o,e,i=.001,r=10){let a=1/0,l=0;for(;a>=i;){if(l>=r)return null;let s=1-o,P=s*s,c=P*s,u=o*o,m=u*o,x=c*t[0][0]+3*P*o*t[1][0]+3*s*u*t[2][0]+m*t[3][0],b=c*t[0][1]+3*P*o*t[1][1]+3*s*u*t[2][1]+m*t[3][1],f=n[0][0]+e*(n[1][0]-n[0][0]),d=n[0][1]+e*(n[1][1]-n[0][1]),h=x-f,G=b-d;if(a=Math.abs(h)+Math.abs(G),a<i)break;let w=-3*P*t[0][0]+3*P*t[1][0]-6*s*o*t[1][0]-3*u*t[2][0]+6*s*o*t[2][0]+3*u*t[3][0],q=-3*P*t[0][1]+3*P*t[1][1]-6*s*o*t[1][1]-3*u*t[2][1]+6*s*o*t[2][1]+3*u*t[3][1],N=-(n[1][0]-n[0][0]),D=-(n[1][1]-n[0][1]),F=w*D-N*q;if(Math.abs(F)<1e-12)return null;let E=1/F,T=E*(D*-h-N*-G),ct=E*(-q*-h+w*-G);o+=T,e+=ct,l+=1}return[o,e]}var I=(t,n)=>p((1-n)**3*t[0][0]+3*(1-n)**2*n*t[1][0]+3*(1-n)*n**2*t[2][0]+n**3*t[3][0],(1-n)**3*t[0][1]+3*(1-n)**2*n*t[1][1]+3*(1-n)*n**2*t[2][1]+n**3*t[3][1]),K=[[.5,0],[.2,0],[.8,0]],U=([t,n],o,e)=>{let i=mt(e,o,t,n,.01,4);if(!i)return null;let[r,a]=i;return r<0||r>1||a<0||a>1?null:I(e,r)};function $t(t,n){let o=U(K[0],n,t);return o?[o]:(o=U(K[1],n,t),o?[o]:(o=U(K[2],n,t),o?[o]:[]))}function pt(t,n,o=.001){let e=(P,c,u,m=o)=>{let x=P,b=c,f;for(;b-x>m;)f=(b+x)/2,u(f-m)<u(f+m)?b=f:x=f;return f},r=0;for(let P=1/0,c=0;c<30;c++){let u=_(n,I(t,c/30));u<P&&(P=u,r=c)}let a=Math.max((r-1)/30,0),l=Math.min((r+1)/30,1),s=e(a,l,P=>_(n,I(t,P)));return s?I(t,s):null}function tn(t,n){let o=pt(t,n);return o?_(n,o):0}function nn(t){return Array.isArray(t)&&t.length===4&&S(t[0])&&S(t[1])&&S(t[2])&&S(t[3])}function $([t,n,o,e],i){return y(-3*(1-i)*(1-i)*t[0]+3*(1-i)*(1-i)*n[0]-6*i*(1-i)*n[0]-3*i*i*o[0]+6*i*(1-i)*o[0]+3*i*i*e[0],-3*(1-i)*(1-i)*t[1]+3*(1-i)*(1-i)*n[1]-6*i*(1-i)*n[1]-3*i*i*o[1]+6*i*(1-i)*o[1]+3*i*i*e[1])}function on(t,n=.5){if(t.length<2)return;let o=[];for(let e=0;e<t.length-1;e++){let i=t[e-1<0?0:e-1],r=t[e],a=t[e+1>=t.length?t.length-1:e+1],l=r[0]+(a[0]-i[0])*n/2,s=r[1]+(a[1]-i[1])*n/2;o.push([p(l,s),p(a[0],a[1])])}return o}function en(t,n=.5){if(t.length<2)return;let o=[];for(let e=0;e<t.length-1;e++){let i=t[e-1<0?0:e-1],r=t[e],a=t[e+1>=t.length?t.length-1:e+1],l=t[e+2>=t.length?t.length-1:e+2],s=[(a[0]-i[0])*n,(a[1]-i[1])*n],P=[(l[0]-r[0])*n,(l[1]-r[1])*n],c=r[0]+s[0]/3,u=r[1]+s[1]/3,m=a[0]-P[0]/3,x=a[1]-P[1]/3;o.push(rt(p(r[0],r[1]),p(c,u),p(m,x),p(a[0],a[1])))}return o}function rn([t,n,o,e],i,r=50){let a=[];for(let l=0;l<=r;l++){let s=l/r,P=rt(t,n,o,e),c=I(P,s),u=W($(P,s)),m=H(u);a.push(C(R(m,i),c))}return a}function an(t,n,o,e,i=50){let r=[];for(let a=0;a<=i;a++){let l=a/i,s=1-l,P=p(s*s*t[0]+2*s*l*n[0]+l*l*o[0],s*s*t[1]+2*s*l*n[1]+l*l*o[1]),c=2*(1-l)*(n[0]-t[0])+2*l*(o[0]-n[0]),u=2*(1-l)*(n[1]-t[1])+2*l*(o[1]-n[1]),m=W(y(c,u)),x=H(m);r.push(C(R(x,e),P))}return r}function at(t){let o=0;for(let e=0;e<24;e++){let i=.5*J[e]+.5,r=$(t,i),a=Math.sqrt(r[0]*r[0]+r[1]*r[1]);o+=Z[e]*a}return .5*o}function xt(t,n){if(n<=0)return 0;if(n>=1)return at(t);let o=n/2,e=n/2,i=0;for(let r=0;r<24;r++){let a=o*J[r]+e,l=$(t,a),s=Math.sqrt(l[0]*l[0]+l[1]*l[1]);i+=Z[r]*s}return o*i}function ln(t,n){if(n<=0)return I(t,0);if(n>=1)return I(t,1);let o=at(t),e=o*n,i=0,r=1,a=n,l=0,s=o*1e-4,P=20;for(let c=0;c<P&&(l=xt(t,a),!(Math.abs(l-e)<s));c++)l<e?i=a:r=a,a=(i+r)/2;return I(t,a)}function pn(t,n,o){return{center:t,halfWidth:n,halfHeight:o}}var xn=(t,n)=>{let{center:o,halfWidth:e,halfHeight:i}=n,r=(t[0]-o[0])/e,a=(t[1]-o[1])/i;return r*r+a*a<=1},bn=(t,n,o=1e-4)=>bt(t,n)<=o,bt=(t,n)=>{let{halfWidth:o,halfHeight:e,center:i}=n,r=o,a=e,l=X(L(t),R(L(i),-1)),s=Math.abs(l[0]),P=Math.abs(l[1]),c=.707,u=.707;for(let b=0;b<3;b++){let f=r*c,d=a*u,h=(r*r-a*a)*c**3/r,G=(a*a-r*r)*u**3/a,w=f-h,q=d-G,N=s-h,D=P-G,F=Math.hypot(q,w),E=Math.hypot(D,N);c=Math.min(1,Math.max(0,(N*F/E+h)/r)),u=Math.min(1,Math.max(0,(D*F/E+G)/a));let T=Math.hypot(u,c);c/=T,u/=T}let[m,x]=[r*c*Math.sign(l[0]),a*u*Math.sign(l[1])];return _(C(l),p(m,x))};function fn(t,n){let o=t.halfWidth,e=t.halfHeight,i=L(n[1],n[0]),r=y(n[0][0]-t.center[0],n[0][1]-t.center[1]),a=y(i[0]/(o*o),i[1]/(e*e)),l=y(r[0]/(o*o),r[1]/(e*e)),s=O(i,a),P=O(i,l),c=O(r,l)-1,u=P*P-s*c,m=[];if(u>0){let x=(-P-Math.sqrt(u))/s,b=(-P+Math.sqrt(u))/s;0<=x&&x<=1&&m.push(p(n[0][0]+(n[1][0]-n[0][0])*x,n[0][1]+(n[1][1]-n[0][1])*x)),0<=b&&b<=1&&m.push(p(n[0][0]+(n[1][0]-n[0][0])*b,n[0][1]+(n[1][1]-n[0][1])*b))}else if(u===0){let x=-P/s;0<=x&&x<=1&&m.push(p(n[0][0]+(n[1][0]-n[0][0])*x,n[0][1]+(n[1][1]-n[0][1])*x))}return m}function dn({center:t,halfWidth:n,halfHeight:o},[e,i]){let[r,a]=t,l=e[0]-r,s=e[1]-a,P=i[0]-r,c=i[1]-a,u=Math.pow(P-l,2)/Math.pow(n,2)+Math.pow(c-s,2)/Math.pow(o,2),m=2*(l*(P-l)/Math.pow(n,2)+s*(c-s)/Math.pow(o,2)),x=Math.pow(l,2)/Math.pow(n,2)+Math.pow(s,2)/Math.pow(o,2)-1,b=(-m+Math.sqrt(Math.pow(m,2)-4*u*x))/(2*u),f=(-m-Math.sqrt(Math.pow(m,2)-4*u*x))/(2*u),d=[p(l+b*(P-l)+r,s+b*(c-s)+a),p(l+f*(P-l)+r,s+f*(c-s)+a)].filter(h=>!isNaN(h[0])&&!isNaN(h[1]));return d.length===2&&k(d[0],d[1])?[d[0]]:d}function tt(t,n){return[t,n]}function lt(t,n){let o=t[1][1]-t[0][1],e=t[0][0]-t[1][0],i=n[1][1]-n[0][1],r=n[0][0]-n[1][0],a=o*r-i*e;if(a!==0){let l=o*t[0][0]+e*t[0][1],s=i*n[0][0]+r*n[0][1];return p((l*r-s*e)/a,(o*s-i*l)/a)}return null}function v(t,n){return[t,n]}var vn=t=>Array.isArray(t)&&t.length===2&&S(t[0])&&S(t[0]),Cn=(t,n,o)=>v(B(t[0],o||Q(t[0],t[1]),n),B(t[1],o||Q(t[0],t[1]),n)),Vn=(t,n)=>{let o=L(t[0]),e=L(t[1]),i=L(n[0]),r=L(n[1]),a=Y(e,o),l=Y(r,i),s=z(a,l);if(s===0)return null;let P=Y(L(n[0]),L(t[0])),c=z(P,a)/s,u=z(P,l)/s;if(c===0)return null;let m=X(o,R(a,u));return u>=0&&u<1&&c>=0&&c<1?C(m):null},j=(t,n,o=1e-4)=>{let e=A(t,n);return e===0?!0:e<o},A=(t,n)=>{let[o,e]=t,[[i,r],[a,l]]=n,s=o-i,P=e-r,c=a-i,u=l-r,m=s*c+P*u,x=c*c+u*u,b=-1;x!==0&&(b=m/x);let f,d;b<0?(f=i,d=r):b>1?(f=a,d=l):(f=i+b*c,d=r+b*u);let h=o-f,G=e-d;return Math.sqrt(h*h+G*G)};function nt(t,n,o){let e=lt(tt(t[0],t[1]),tt(n[0],n[1]));return!e||!j(e,n,o)||!j(e,t,o)?null:e}function _n(t,n){return nt(t,n)?0:Math.min(A(t[0],n),A(t[1],n),A(n[0],t),A(n[1],t))}function wn(...t){return st(t)}function qn(t){return st(t)}var Tn=(t,n)=>{let o=t[0],e=t[1],i=!1;for(let r=0,a=n.length-1;r<n.length;a=r++){let l=n[r][0],s=n[r][1],P=n[a][0],c=n[a][1];(s>e&&c<=e||s<=e&&c>e)&&o<(P-l)*(e-s)/(c-s)+l&&(i=!i)}return i},zn=(t,n)=>{let[o,e]=t,i=0;for(let r=0;r<n.length;r++){let a=(r+1)%n.length,[l,s]=n[r],[P,c]=n[a];s<=e?c>e&&(P-l)*(e-s)-(o-l)*(c-s)>0&&i++:c<=e&&(P-l)*(e-s)-(o-l)*(c-s)<0&&i--}return i!==0},On=(t,n,o=1e-4)=>{let e=!1;for(let i=0,r=n.length-1;i<r;i++)if(j(t,v(n[i],n[i+1]),o)){e=!0;break}return e};function st(t){return ft(t)?t:[...t,t[0]]}function ft(t){return k(t[0],t[t.length-1])}import{toBrandedType as ot}from"@excalidraw/common";function Bn(t,n){return ot([t,n])}function jn(t){return ot(t)}var Wn=([t,n],[o,e])=>t<=o?n>=o:t>=o?e>=t:!1,Hn=([t,n],[o,e])=>{let i=Math.max(t,o),r=Math.min(n,e);return i<=r?ot([i,r]):null},Qn=(t,[n,o])=>t>=n&&t<=o;function dt(t,n){return[t,n]}function $n(t,n,o,e){return dt(p(t,n),p(o,e))}function to(t,n){return[v(t[0],p(t[1][0],t[0][1])),v(p(t[1][0],t[0][1]),t[1]),v(t[1],p(t[0][0],t[1][1])),v(p(t[0][0],t[1][1]),t[0])].map(o=>nt(n,o)).filter(o=>!!o)}function no(t,n){let[[o,e],[i,r]]=t,[[a,l],[s,P]]=n;return o<s&&i>a&&e<P&&r>l}function io([t,n,o],e){let i=(c,u,m)=>(c[0]-m[0])*(u[1]-m[1])-(u[0]-m[0])*(c[1]-m[1]),r=i(e,t,n),a=i(e,n,o),l=i(e,o,t),s=r<0||a<0||l<0,P=r>0||a>0||l>0;return!(s&&P)}export{M as PRECISION,yt as average,I as bezierEquation,vt as cartesian2Polar,gt as clamp,rt as curve,en as curveCatmullRomCubicApproxPoints,on as curveCatmullRomQuadraticApproxPoints,pt as curveClosestPoint,$t as curveIntersectLineSegment,at as curveLength,xt as curveLengthAtParameter,rn as curveOffsetPoints,ln as curvePointAtLength,tn as curvePointDistance,$ as curveTangent,et as degreesToRadians,A as distanceToLineSegment,pn as ellipse,bt as ellipseDistanceFromPoint,xn as ellipseIncludesPoint,dn as ellipseLineIntersectionPoints,fn as ellipseSegmentInterceptPoints,bn as ellipseTouchesPoint,Mt as isCloseTo,nn as isCurve,Gt as isFiniteNumber,vn as isLineSegment,S as isPoint,jt as isPointWithinBounds,Vt as isRightAngleRads,Et as isVector,tt as line,v as lineSegment,nt as lineSegmentIntersectionPoints,Cn as lineSegmentRotate,_n as lineSegmentsDistance,lt as linesIntersectAt,V as normalizeRadians,an as offsetPointsForQuadraticBezier,Q as pointCenter,_ as pointDistance,kt as pointDistanceSq,p as pointFrom,Ot as pointFromArray,Xt as pointFromPair,C as pointFromVector,j as pointOnLineSegment,On as pointOnPolygon,Yt as pointRotateDegs,B as pointRotateRads,Bt as pointScaleFromOrigin,ut as pointTranslate,k as pointsEqual,wn as polygon,qn as polygonFromPoints,Tn as polygonIncludesPoint,zn as polygonIncludesPointNonZero,_t as radiansBetweenAngles,Nt as radiansDifference,Ct as radiansToDegrees,Qn as rangeIncludesValue,Bn as rangeInclusive,jn as rangeInclusiveFromPair,Hn as rangeIntersection,Wn as rangesOverlap,dt as rectangle,$n as rectangleFromNumberSequence,to as rectangleIntersectLineSegment,no as rectangleIntersectRectangle,ht as round,Lt as roundToStep,Vn as segmentsIntersectAt,io as triangleIncludesPoint,y as vector,X as vectorAdd,z as vectorCross,O as vectorDot,L as vectorFromPoint,Pt as vectorMagnitude,it as vectorMagnitudeSq,H as vectorNormal,W as vectorNormalize,R as vectorScale,Y as vectorSubtract};
